{% extends 'FrontendBundle::Default/base.html.twig' %}
{% block title %}Reporte de IVA{% endblock %}
{% block CSs %}{% endblock %}
{% block Scripts %}
<script>
	window.arrayempresa = {{ empresa|raw }};
	console.log(arrayempresa);
	$(document).ready(function(){
		$("#titulo-empresa").text(arrayempresa.nombre);
		$("#buscarPeriodo").on("click",function(){
			console.log($("#periodo").val());
			console.log(typeof($("#periodo").val()));
			$.get("/impositivo/iva/" + arrayempresa.id + "/" + $("#periodo").val(),function(resp,estado,jqXHR){
    	    	var arrayIva = JSON.parse(resp);
    	    	window.arrayIva= arrayIva.data;
    	    	console.log(arrayIva);
    	    	

    	    	// primero calculamos los netos
    	    	var ventasNetoTotal = parseFloat("0");
    	    	var ventasNeto105 = parseFloat("0");
    	    	var ventasNeto21 = parseFloat("0");
    	    	var ventasExento = parseFloat("0");
    	    	var ventasNogravado = parseFloat("0");
    	    	
    	    	var ventasIva21Total = parseFloat("0");
    	    	var ventasIva21RI = parseFloat("0");
    	    	var ventasIva21MON = parseFloat("0");
    	    	var ventasIva21CF = parseFloat("0");
    	    	var ventasIva21EXI = parseFloat("0");
    	    	var ventasIva21SNC = parseFloat("0");

    	    	var ventasIva105Total = parseFloat("0");
    	    	var ventasIva105RI = parseFloat("0");
    	    	var ventasIva105MON = parseFloat("0");
    	    	var ventasIva105CF = parseFloat("0");
    	    	var ventasIva105EXI = parseFloat("0");
    	    	var ventasIva105SNC = parseFloat("0");
    	    	arrayIva.data.ventas.forEach(function(item,index,arr){
    	    		
    	    		//Netos
    	    		ventasNeto105 = parseFloat(ventasNeto105) + parseFloat(item.neto105);
    	    		ventasNeto21 = parseFloat(ventasNeto21) + parseFloat(item.neto21);
    	    		ventasExento = parseFloat(ventasExento) + parseFloat(item.neto_exento);
    	    		ventasNogravado = parseFloat(ventasNogravado) + parseFloat(item.nogravado);

    	    		//IVAs

    	    		if (item.cliente.iva.codigo == "RI"){
    	    			console.log("RI");
    	    			ventasIva21RI = parseFloat(ventasIva21RI) + parseFloat(item.iva21);
    	    			ventasIva105RI = parseFloat(ventasIva105RI) + parseFloat(item.iva105);
    	    		};
    	    		if (item.cliente.iva.codigo == "MON"){
    	    			console.log("MON");
    	    			ventasIva21MON = parseFloat(ventasIva21MON) + parseFloat(item.iva21);
    	    			ventasIva105MON = parseFloat(ventasIva105MON) + parseFloat(item.iva105);
    	    		};
    	    		if (item.cliente.iva.codigo == "CF"){
    	    			console.log("CF");
    	    			ventasIva21CF = parseFloat(ventasIva21CF) + parseFloat(item.iva21);
    	    			ventasIva105CF = parseFloat(ventasIva105CF) + parseFloat(item.iva105);
    	    		};
    	    		if (item.cliente.iva.codigo == "EXI"){
    	    			console.log("EXI");
    	    			ventasIva21EXI = parseFloat(ventasIva21EXI) + parseFloat(item.iva21);
    	    			ventasIva105EXI = parseFloat(ventasIva105EXI) + parseFloat(item.iva105);
    	    		};
    	    		if (item.cliente.iva.codigo == "SNC"){
    	    			console.log("SNC");
    	    			ventasIva21SNC = parseFloat(ventasIva21SNC) + parseFloat(item.iva21);
    	    			ventasIva105SNC = parseFloat(ventasIva105SNC) + parseFloat(item.iva105);
    	    		};

    	    		
    	    	});
    	    	ventasNetoTotal = parseFloat(ventasNetoTotal) + parseFloat(ventasNeto105) + parseFloat(ventasNeto21) +parseFloat(ventasExento) +parseFloat(ventasNogravado);

    	    	ventasIva105Total = parseFloat(ventasIva105RI) + parseFloat(ventasIva105MON) +parseFloat(ventasIva105CF) + parseFloat(ventasIva105EXI) + parseFloat(ventasIva105SNC);

    	    	ventasIva21Total = parseFloat(ventasIva21RI) + parseFloat(ventasIva21MON) +parseFloat(ventasIva21CF) + parseFloat(ventasIva21EXI) + parseFloat(ventasIva21SNC);

				$("#netos-total").text(ventasNetoTotal);
				$("#neto21").val(ventasNeto21);
				$("#neto105").val(ventasNeto105);
				$("#netoExento").val(ventasExento);
				$("#netoNogravado").val(ventasNogravado);

				$("#iva21-total").text(ventasIva21Total);
				$("#iva21RI").val(ventasIva21RI);
				$("#iva21MON").val(ventasIva21MON);
				$("#iva21CF").val(ventasIva21CF);
				$("#iva21EXI").val(ventasIva21EXI);
				$("#iva21SNC").val(ventasIva21SNC);

				$("#iva105-total").text(ventasIva105Total);
				$("#iva105RI").val(ventasIva105RI);
				$("#iva105MON").val(ventasIva105MON);
				$("#iva105CF").val(ventasIva105CF);
				$("#iva105EXI").val(ventasIva105EXI);
				$("#iva105SNC").val(ventasIva105SNC);




    		});

		});


	});
</script>	
{% endblock %}
{% block body %}
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
       <h2>
        IVA
        <small>Periodo detallado</small>
      </h2>
      <h2 id="titulo-empresa"></h2>
      <ol class="breadcrumb">
        <li><a href="/"><i class="fa fa-home"></i> Home</a></li>
        <li><a href="/impositivo"><i class="fa fa-search"></i> Impositivo</a></li>
        <li class="active"><i class="fa fa-plus" aria-hidden="true"></i> IVA</li>
      </ol>
    </section>
    <!-- Main content -->
    <section class="content">
      	<div class="row">
	  		<div class="col-xs-12">
		        <div class="form-group">
		                      {% block botones %}
		                      {% endblock %}
		        </div>
         	</div>
	        <div class="col-md-4">
	          <h3>Ventas</h3>
	          <!-- panel netos  -->
	          <div class="panel-group">
	            <div class="panel panel-default">
	              <div class="panel-heading">
	                <!-- header netos-->
	                <h4 class="panel-title">
	                  <a data-toggle="collapse" href="#netosventas" class="form-inline">
	                    <div class="col-md-6 text-left">
	                      <label>Netos</label>
	                    </div>
	                    <div class="text-right">
	                      <label>total: </label>
	                      <Label id="netos-total"></label>
	                    </div>
	                  </a>
	                </h4>
	                <!-- /header netos -->
	              </div>
	              <div id="netosventas" class="panel-collapse collapse">
	                <!-- body de netos-->
	                <div class="panel-body">
	                   <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">Neto 21%: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="neto21"></input>
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">Neto 10.5%: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="neto105"></input>
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">Neto exento: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="netoExento"></input>
	                      </div>             
	                    </div>
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">Neto No Gravado: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="netoNogravado"></input>
	                      </div>             
	                    </div>
	                    <!--/  -->
	                </div>
	                <!--/body de netos -->
	              </div>
	            </div>
	          </div>
	          <!--/panel netos  -->
	          <!-- panel IVA21  -->
	          <div class="panel-group">
	            <div class="panel panel-default">
	              <div class="panel-heading">
	                <!-- header IVA21-->
	                <h4 class="panel-title">
	                  <a data-toggle="collapse" href="#iva21ventas" class="form-inline">
	                    <div class="col-md-6 text-left">
	                      <label>IVA 21%</label>
	                    </div>
	                    <div class="text-right">
	                      <label>total</label>
	                      <Label id="iva21-total"></label>
	                    </div>
	                  </a>
	                </h4>
	                <!-- /header IVA21 -->
	              </div>
	              <div id="iva21ventas" class="panel-collapse collapse">
	                <!-- body de IVA21-->
	                <div class="panel-body">
	                   <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">IVA 21 RI: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="iva21RI">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">IVA 21 MON: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="iva21MON">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">IVA 21 CF: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="iva21CF">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">IVA 21 EXI: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="iva21EXI">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">IVA 21 SNC: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="iva21SNC">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                </div>
	                <!--/body de IVA21 -->
	              </div>
	            </div>
	          </div>
	          <!--/panel IVA21  -->
	           <!-- panel IVA10.5  -->
	          <div class="panel-group">
	            <div class="panel panel-default">
	              <div class="panel-heading">
	                <!-- header IVA10.5-->
	                <h4 class="panel-title">
	                  <a data-toggle="collapse" href="#iva105ventas" class="form-inline">
	                    <div class="col-md-6 text-left">
	                      <label>IVA 10.5%</label>
	                    </div>
	                    <div class="text-right">
	                      <label>total</label>
	                      <Label id="iva105-total"></label>
	                    </div>
	                  </a>
	                </h4>
	                <!-- /header IVA10.5 -->
	              </div>
	              <div id="iva105ventas" class="panel-collapse collapse">
	                <!-- body de IVA10.5-->
	                <div class="panel-body">
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">IVA 10.5 RI: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="iva105RI">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">IVA 10.5 MON: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="iva105MON">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">IVA 10.5 CF: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="iva105CF">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">IVA 10.5 EXI: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="iva105EXI">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">IVA 10.5 SNC: </label>
	                      <div class="col-md-6">
	                        <input type="text" class="form-control input-sm" id="iva105SNC">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                </div>
	                <!--/body de IVA10.5 -->
	              </div>
	            </div>
	          </div>
	          <!--/panel IVA10.5  -->
	          <!-- total -->
	          <div class="form-group">                         
	            <label class="control-label col-md-6" for="">Total: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>                      
	          </div>
	          <!-- /total -->
	          <br>
	          <!-- Retencion/Percepcion IVA -->
	          <div class="form-group">
	            <label class="control-label col-md-6" for="">Retencion/Percepcion IVA: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>        
	          </div>
	          <!-- /Retencion/Percepcion IVA -->
	        </div>
	        <!-- /ventas -->
	        <div class="col-md-4">
	          <h3>Compras</h3>
	          <!-- panel netos  -->
	          <div class="panel-group">
	            <div class="panel panel-default">
	              <div class="panel-heading">
	                <!-- header netos-->
	                <h4 class="panel-title">
	                  <a data-toggle="collapse" href="#netosCompras" class="form-inline">
	                    <div class="col-md-6 text-left">
	                      <label>Netos</label>
	                    </div>
	                    <div class="text-right">
	                      <label>total</label>
	                      <Label id=""> 1000$</label>
	                    </div>
	                  </a>
	                </h4>
	                <!-- /header netos -->
	              </div>
	              <div id="netosCompras" class="panel-collapse collapse">
	                <!-- body de netos-->
	                <div class="panel-body">
	                    <!--  -->
	                    <div class="form-group">
	                     <label class="control-label col-md-6" for="">Gravado 21%: </label>
	                      <div class="col-md-6">
	                        <input type="" class="form-control input-sm" id="">
	                      </div>             
	                    </div>
	                    <!-- / -->
	                    <!--  -->
	                    <div class="form-group">
	                      <label class="control-label col-md-6" for="">Gravado 27%: </label>
	                      <div class="col-md-6">
	                        <input type="" class="form-control input-sm" id="">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">
	                      <label class="control-label col-md-6" for="">Gravado 10.5%: </label>
	                      <div class="col-md-6">
	                        <input type="" class="form-control input-sm" id="">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">
	                      <label class="control-label col-md-6" for="">No Gravado: </label>
	                      <div class="col-md-6">
	                        <input type="" class="form-control input-sm" id="">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                    <!--  -->
	                    <div class="form-group">                          
	                      <label class="control-label col-md-6" for="">Exento: </label>
	                      <div class="col-md-6">
	                        <input type="" class="form-control input-sm" id="">
	                      </div>             
	                    </div>
	                    <!--/  -->
	                </div>
	                <!--/body de netos -->
	              </div>
	            </div>
	          </div>
	          <!--/panel netos  -->
	          <!-- panel IVA21  -->
	          <div class="panel-group">
	            <div class="panel panel-default">
	              <div class="panel-heading">
	                <!-- header IVA21-->
	                <h4 class="panel-title">
	                  <a data-toggle="collapse" href="#iva21Compras" class="form-inline">
	                    <div class="col-md-6 text-left">
	                      <label>IVA 21%</label>
	                    </div>
	                    <div class="text-right">
	                      <label>total</label>
	                      <Label id="">$1000</label>
	                    </div>
	                  </a>
	                </h4>
	                <!-- /header IVA21 -->
	              </div>
	              <div id="iva21Compras" class="panel-collapse collapse">
	                <!-- body de IVA21-->
	                <div class="panel-body">
	                    hay que cargar muchas imputaciones
	                    <br>
	                    a
	                    <br>
	                    a
	                    <br>
	                    a
	                    <br>
	                    a
	                </div>
	                <!--/body de IVA21 -->
	              </div>
	            </div>
	          </div>
	          <!--/panel IVA21  -->
	           <!-- panel IVA10.5  -->
	          <div class="panel-group">
	            <div class="panel panel-default">
	              <div class="panel-heading">
	                <!-- header IVA10.5-->
	                <h4 class="panel-title">
	                  <a data-toggle="collapse" href="#iva105compras" class="form-inline">
	                    <div class="col-md-6 text-left">
	                      <label>IVA 10.5%</label>
	                    </div>
	                    <div class="text-right">
	                      <label>total</label>
	                      <Label id="">$1000</label>
	                    </div>
	                  </a>
	                </h4>
	                <!-- /header IVA10.5 -->
	              </div>
	              <div id="iva105compras" class="panel-collapse collapse">
	                <!-- body de IVA10.5-->
	                <div class="panel-body">
	                    aca hay que cargar dinamicamente cada imputacion 
	                    <br>
	                    a
	                    <br>
	                    a
	                    <br>
	                    a
	                    <br>
	                    a
	                </div>
	                <!--/body de IVA10.5 -->
	              </div>
	            </div>
	          </div>
	          <!--/panel IVA10.5  -->
	          <!-- IVA 27% -->
	          <div class="form-group">
	            <label class="control-label col-md-6" for="">IVA 27%: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>                     
	          </div>
	          <!-- /IVA 27% -->
	          <br>
	          <!-- percepcion -->
	          <div class="form-group">
	            <label class="control-label col-md-6" for="">Percepcion: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>             
	          </div>
	          <!-- /percepcion -->
	          <br>
	          <!-- total -->
	          <div class="form-group">                          
	            <label class="control-label col-md-6" for="">Total: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>                    
	          </div>
	          <!-- /total-->
	        </div>
	        <!--/compras -->
	        <div class="col-md-4">
	          <h3>Posiciones</h3>
	          <div class="form-group">
	           <label class="control-label col-md-6" for="">Subtotal IVA: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>             
	          </div>
	          <div class="form-group">
	            <label class="control-label col-md-6" for="">Retenciones: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>             
	          </div>
	          <div class="form-group">
	            <label class="control-label col-md-6" for="">Percepciones: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>             
	          </div>
	          <div class="form-group">
	            <label class="control-label col-md-6" for="">Saldo a favor: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>             
	          </div>
	          <div class="form-group">                          
	            <label class="control-label col-md-6" for="">Saldo a Ingresar: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>             
	          </div>
	          <div class="form-group">                          
	            <label class="control-label col-md-6" for="">Saldo a favor del contribuyente: </label>
	            <div class="col-md-6">
	              <input type="" class="form-control input-sm" id="">
	            </div>             
	          </div>
	        </div>
      	</div>
    </section>
  </div>

{% endblock %}